

## Добавление фоллбэка на API2 при ошибке 500

### Проблема
Когда Google Gemini API возвращает ошибку 500 (Internal Server Error), генерация сразу помечается как неудачная. Фоллбэк на второй API-ключ (API2) не срабатывает, потому что в условии проверяются только статусы 503, 429 и 403.

### Решение
Добавить статус `500` в условие фоллбэка в файле `supabase/functions/process-google-task/index.ts`.

### Технические детали

**Файл:** `supabase/functions/process-google-task/index.ts`

1. **Строка ~340** — добавить `500` в условие переключения на API2:
   - Было: `aiResult.status === 503 || aiResult.status === 429 || aiResult.status === 403`
   - Станет: `aiResult.status === 500 || aiResult.status === 503 || aiResult.status === 429 || aiResult.status === 403`

2. **Строка ~348** — аналогично в проверке после фоллбэка (если API2 тоже вернул ошибку, перед финальным ретраем):
   - Добавить `aiResult.status === 500` в условие

3. **Строка ~369** — в блоке обработки ошибок после исчерпания всех попыток:
   - Добавить `status === 500` в условие, чтобы пользователь получал понятное сообщение о временной проблеме сервера

Таким образом цепочка при ошибке 500 станет:
1. Попытка с PRIMARY_KEY
2. Ждём 2 секунды, попытка с FALLBACK_KEY (API2)
3. Если API2 тоже вернул ошибку — ждём 10 секунд, финальная попытка с PRIMARY_KEY
4. Только если все 3 попытки провалились — помечаем как failed и возвращаем токены

